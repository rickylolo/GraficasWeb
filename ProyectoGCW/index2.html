<!DOCTYPE html>
<html lang="ES">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <link rel="stylesheet" type="text/css" href="base.css">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=IM+Fell+English&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=IM+Fell+French+Canon+SC&display=swap" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Nivel 2</title>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet">
    <link href="/css/style.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
  </head>
  

<body>
  <!-- <button id="button-login">Login Google</button>
  <button id="button-logout">Logout</button> -->
  <script src="./js/src/main2.js" type="module"></script>
  <script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.19.0/firebase-app.js";
    import {
      GoogleAuthProvider,
      signInWithPopup,
      getAuth,
      signOut,
    } from "https://www.gstatic.com/firebasejs/9.19.0/firebase-auth.js";

    import {
      getDatabase,
      ref,
      onValue,
      set,
    } from "https://www.gstatic.com/firebasejs/9.19.0/firebase-database.js";

    /*
        // Your web app's Firebase configuration
        const firebaseConfig = {
          apiKey: "AIzaSyB-i-B3FuedTBzUg3zOrHoWvkiKdpX6Vnc",
          authDomain: "gcwproyecto-9df64.firebaseapp.com",
          databaseURL: "https://gcwproyecto-9df64-default-rtdb.firebaseio.com",
          projectId: "gcwproyecto-9df64",
          storageBucket: "gcwproyecto-9df64.appspot.com",
          messagingSenderId: "286044668722"
        };
    
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const provider = new GoogleAuthProvider();
        const db = getDatabase();
        const auth = getAuth();
        auth.languageCode = "es";
    
        //Buttons
        const buttonLogin = document.getElementById("button-login");
        const buttonLogout = document.getElementById("button-logout");
    
        buttonLogin.addEventListener("click", () => {
          login();
        });
    
        buttonLogout.addEventListener("click", () => {
          signOut(auth)
            .then(() => {
              // Sign-out successful.
              console.log("Sign-out successful");
            })
            .catch((error) => {
              // An error happened.
              console.log("An error happened");
            });
        });
    
        let currentUser;
        async function login() {
          await signInWithPopup(auth, provider)
            .then((result) => {
              // This gives you a Google Access Token. You can use it to access the Google API.
              const credential = GoogleAuthProvider.credentialFromResult(result);
              const token = credential.accessToken;
              // The signed-in user info.
              const user = result.user;
              currentUser = result.user;
              writeUserData(user.uid, { x: 0, z: 0 });
              // IdP data available using getAdditionalUserInfo(result)
              // ...
            })
            .catch((error) => {
              // Handle Errors here.
              const errorCode = error.code;
              const errorMessage = error.message;
              // The email of the user's account used.
              const email = error.customData.email;
              // The AuthCredential type that was used.
              const credential = GoogleAuthProvider.credentialFromError(error);
              // ...
            });
        }
    
        const starCountRef = ref(db, "jugadores/");
    
        onValue(starCountRef, (snapshot) => {
          const data = snapshot.val();
    
          Object.entries(data).forEach(([key, value]) => {
            const jugador = scene.getObjectByName(key);
            if (!jugador) {
              const geometry = new THREE.BoxGeometry(1, 1, 1);
              const material = new THREE.MeshPhongMaterial();
              const mesh = new THREE.Mesh(geometry, material);
              mesh.castShadow = true;
              mesh.position.set(value.x, 0, value.z);
              mesh.name = key;
              mesh.material.color = new THREE.Color(Math.random() * 0xffffff);
              scene.add(mesh);
            }
            scene.getObjectByName(key).position.x = value.x;
            scene.getObjectByName(key).position.z = value.z;
          });
        });
    
        function writeUserData(userId, position) {
          set(ref(db, "jugadores/" + userId), {
            x: position.x,
            z: position.z,
          });
        }
    
    */
  </script>
   <div class="container-GAME" id="container">
    <div class="corner text-white fs-5">Tiempo: 00:00</div>
    <div class="corner text-white fs-5" id="misPuntosObtenidos">Puntos: 0</div>
    <div class="corner text-white fs-5 text-center d-flex flex-column align-content-center">Pistola<br>
      <div class="d-flex justify-content-center">
          <img src="../img/revolvers1.png" width="80px" height="80px">
      </div>
    </div>
    <div class="ui">
      <div class="quest-journal-layout">
        <div class="quest-journal" id="quest-journal">
        </div>
      </div>
    </div>
    <div class="ui">
      <div class="quest-ui-layout">
        <div class="quest-ui" id="quest-ui">
          <div class="quest-text-title" id="quest-text-title"></div>
          <div class="quest-text" id="quest-text"></div>
        </div>
      </div>
    </div>
    <div class="ui">
      <div class="icon-ui">
        <div class="icon-bar" id="icon-bar">
          <div class="icon-bar-item" id="icon-bar-stats"
            style="background-image: url('js/resources/icons/ui/skills.png');"></div>
          <div class="icon-bar-item" id="icon-bar-inventory"
            style="background-image: url('js/resources/icons/ui/backpack.png');"></div>
          <div class="icon-bar-item" id="icon-bar-quests"
            style="background-image: url('js/resources/icons/ui/tied-scroll.png');"></div>
            <button class="icon-bar-item" id="icon-bar-pause"
            style="background-image: url('js/resources/icons/ui/Pausa.png');"></button>


        </div>
      </div>
    </div>
    <div class="ui">
      <div class="stats" id="stats">
        <div class="stats-inner">
          <div class="stats-title">Estadísticas</div>
          <div class="stats-row">
            <div class="stats-tooltip">Daño
              <div class="stats-tooltiptext">Aqui se muestra cuanto daño le haces a los zombies.</div>
            </div>
            <div id="stats-strength">0</div>
          </div>
          <div class="stats-row">
            <div class="stats-tooltip">Zombies:
              <div class="stats-tooltiptext">Aqui se muestra la cantidad de zombies restantes.</div>
            </div>
            <div id="stats-zombies-killed">30</div>
          </div>
          <div class="stats-row">
            <div class="stats-tooltip">XP
              <div class="stats-tooltiptext">Esta es la Experiencia que obtienes al matar enemigos.</div>
            </div>
            <div id="stats-experience">0</div>
          </div>

          <div class="stats-row">
            <div class="stats-tooltip">Sig. Nivel XP
              <div class="stats-tooltiptext">Esta es la Experiencia que necesitas para llegar al siguiente nivel.</div>
            </div>
            <div id="stats-experience-next"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="ui">
      <div class="health-ui">
        <div class="health-bar" id="health-bar"></div>
      </div>
    </div>
    <div class="ui">
      <div class="inventory" id="inventory">
        <div class="inventory-inner">
          <div class="inventory-title">Inventory</div>
          <div class="inventory-row">
            <div class="inventory-column">
              <div class="inventory-item" id="inventory-equip-1" draggable="true"></div>
              <div class="inventory-item" id="inventory-equip-2" draggable="true"></div>
              <div class="inventory-item" id="inventory-equip-3" draggable="true"></div>
              <div class="inventory-item" id="inventory-equip-4" draggable="true"></div>
            </div>
            <div class="inventory-column">
              <div class="inventory-item" id="inventory-equip-5" draggable="true"></div>
              <div class="inventory-item" id="inventory-equip-6" draggable="true"></div>
              <div class="inventory-item" id="inventory-equip-7" draggable="true"></div>
              <div class="inventory-item" id="inventory-equip-8" draggable="true"></div>
            </div>
          </div>
          <div class="inventory-row">
            <div class="inventory-item" id="inventory-1" draggable="true"></div>
            <div class="inventory-item" id="inventory-2" draggable="true"></div>
            <div class="inventory-item" id="inventory-3" draggable="true"></div>
            <div class="inventory-item" id="inventory-4" draggable="true"></div>
            <div class="inventory-item" id="inventory-5" draggable="true"></div>
            <div class="inventory-item" id="inventory-6" draggable="true"></div>
            <div class="inventory-item" id="inventory-7" draggable="true"></div>
            <div class="inventory-item" id="inventory-8" draggable="true"></div>
          </div>
          <div class="inventory-row">
            <div class="inventory-item" id="inventory-9" draggable="true"></div>
            <div class="inventory-item" id="inventory-10" draggable="true"></div>
            <div class="inventory-item" id="inventory-11" draggable="true"></div>
            <div class="inventory-item" id="inventory-12" draggable="true"></div>
            <div class="inventory-item" id="inventory-13" draggable="true"></div>
            <div class="inventory-item" id="inventory-14" draggable="true"></div>
            <div class="inventory-item" id="inventory-15" draggable="true"></div>
            <div class="inventory-item" id="inventory-16" draggable="true"></div>
          </div>
          <div class="inventory-row">
            <div class="inventory-item" id="inventory-17" draggable="true"></div>
            <div class="inventory-item" id="inventory-18" draggable="true"></div>
            <div class="inventory-item" id="inventory-19" draggable="true"></div>
            <div class="inventory-item" id="inventory-20" draggable="true"></div>
            <div class="inventory-item" id="inventory-21" draggable="true"></div>
            <div class="inventory-item" id="inventory-22" draggable="true"></div>
            <div class="inventory-item" id="inventory-23" draggable="true"></div>
            <div class="inventory-item" id="inventory-24" draggable="true"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div id="pauseMenu" class="pauseMenu">
  <div class="dashed bg-danger">
    PAUSA
    <div class="d-flex flex-column pChild">
      <button class="btn btn-lg btn-danger" id="volverJuego">REANUDAR</button>
      <button class="btn btn-lg btn-danger" id="verConfiguracion">CONFIGURACION</button>
      <button class="btn  btn-lg btn-danger" id="regresarInicio">SALIR</button>
    </div>
</div>
</div>
<div id="GameOver">
  <div id="contenedorGameOver" class="d-flex flex-column justify-content-center align-items-center">
   
    <div id="gameover" class="container  d-flex justify-content-center align-items-center">
  
        GAME OVER
      
    </div>
      <div class="">
          <a class="btn btn-lg btn-danger">VOLVER</a>
          
  
  
        </div>
  </div>
</div>

<div id="Configuracion">

  <div class="pauseMenu vh-100 d-flex flex-column justify-content-center align-items-center">

    <div id="settings" class="dashed bg-danger">

      <div class="d-flex flex-column pChild p-5">
        <label for="customRange1" class="form-label">Volumen</label>
        <input type="range" class="form-range" id="customRange1">

      </div>


    </div>
    <div class="d-flex  justify-content-center  pt-5 w-auto ">


      <div class="d-grid gap-2">
        <button class="btn btn-danger" type="button" id="volverPausaFromConfiguracion"><img src="../img/skull.png" width="80px"
            heigh="80px">ABANDONAR</button>
      </div>

    </div>


  </div>

</div>

</body>

</html>